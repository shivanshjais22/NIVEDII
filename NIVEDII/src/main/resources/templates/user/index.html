<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<section class="vh-100" style="background-color: #f8f9fa;">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-6">

                <div class="card shadow-sm p-4 text-center">
                    <h3 class="mb-4">Welcome, John Doe!</h3>

                    <p><strong>Email:</strong> john@example.com</p>
                    <p><strong>Phone:</strong> +91 9876543210</p>

                   <button onclick="startTracking()">üìç GPS Tracking</button>
<button onclick="activateBuzzer()">üîî Activate Buzzer</button>

<div id="map" style="height:400px;"></div>

<script>
function startTracking() {
    const map = L.map('map').setView([0,0], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
    const marker = L.marker([0,0]).addTo(map);

    const ws = new WebSocket("ws://localhost:8080/gps");
    ws.onmessage = (event) => {
        const { lat, lon } = JSON.parse(event.data);
        marker.setLatLng([lat, lon]);
        map.setView([lat, lon], 13);
    };
}

function activateBuzzer() {
    fetch("/buzzer/on", { method: "POST" });
}
</script>
                </div>

            </div>
        </div>
    </div>
</section>
</body>
</html>
